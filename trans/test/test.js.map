{"version":3,"sources":["../../main/test/test.js"],"names":["expect","users","user1","name","email","address","user2","createdUser1","createdUser2","wrongdUser2","id","updateUser2","describe","it","to","be","a","an","instanceOf","model","create","then","user","Object","assign","eql","catch","error","message","length","equal","update","newUser2","findById","singleModel","find","where","findAll","allUsers","have","of","at","least","destroy"],"mappings":"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","file":"test.js","sourcesContent":["\r\nimport chai from 'chai';\r\nimport DataModel from './../src/DummyDataModel';\r\n\r\nconst { expect } = chai;\r\nconst users = new DataModel('users', ['email']);\r\nconst user1 = {\r\n  name: 'jane doe',\r\n  email: 'jane_doe@somebody.com',\r\n  address: 'somewhere in the world',\r\n};\r\nconst user2 = {\r\n  name: 'alice',\r\n  email: 'alice@somebody.com',\r\n  address: 'lives in another planet',\r\n};\r\nconst createdUser1 = {};\r\nconst createdUser2 = {};\r\nconst wrongdUser2 = {\r\n  id: 2,\r\n  name: 'alice',\r\n  email: 'alice@somebody.com',\r\n  address: 'lives in another planet',\r\n};\r\nconst updateUser2 = {\r\n  name: 'alice bob',\r\n  address: 'now living in planet earth',\r\n};\r\n\r\ndescribe('Dummy Data Model', () => {\r\n  describe('DataModel', () => {\r\n    it('should export a function', () => {\r\n      expect(DataModel).to.be.a('function');\r\n    });\r\n  });\r\n\r\n  describe('Users', () => {\r\n    it('should export a function', () => {\r\n      expect(users).to.be.a('object');\r\n    });\r\n    it('should be an instance of DataModel', () => {\r\n      expect(users).to.be.an.instanceOf(DataModel);\r\n    });\r\n  });\r\n\r\n  describe('create method', () => {\r\n    it('user model should be an array', () => {\r\n      expect(users.model).to.be.an('array');\r\n    });\r\n    it('it should create new user', () => {\r\n      users.create(user1)\r\n        .then((user) => {\r\n        \tObject.assign(createdUser1, user);\r\n          expect(user).to.eql({\r\n            id: 1,\r\n            name: 'jane doe',\r\n            email: 'jane_doe@somebody.com',\r\n            address: 'somewhere in the world',\r\n          });\r\n        });\r\n    });\r\n\r\n    it('it should create another user', () => {\r\n      users.create(user2)\r\n        .then((user) => {\r\n        \tObject.assign(createdUser2, user);\r\n          expect(user).to.eql({\r\n            id: 2,\r\n            name: 'alice',\r\n            email: 'alice@somebody.com',\r\n            address: 'lives in another planet',\r\n          });\r\n        });\r\n    });\r\n\r\n    it('should not create duplicate entry for unique keys', () => {\r\n      users.create(user2)\r\n        .then((user) => {\r\n          expect(user).to.eql({\r\n            id: 2,\r\n            name: 'alice',\r\n            email: 'alice@somebody.com',\r\n            address: 'lives in another planet',\r\n          })\r\n        })\r\n        .catch((error) => {\r\n        \texpect(error).to.eql({ message: `duplicate entry for unique key` });\r\n        });\r\n    });\r\n\r\n    it('lenght of model should increase', () => {\r\n      expect(users.model.length).to.equal(2);\r\n    });\r\n  });\r\n\r\n  describe('update method', () => {\r\n    it('should update a model', () => {\r\n      users.update(createdUser2, updateUser2)\r\n        .then((newUser2) => {\r\n          expect(newUser2).to.eql({\r\n            id: 2,\r\n            email: 'alice@somebody.com',\r\n            name: 'alice bob',\r\n            address: 'now living in planet earth',\r\n          });\r\n        });\r\n    });\r\n   \r\n    it('should not update a wrong model', () => {\r\n\t    users.update(wrongdUser2, updateUser2)\r\n\t      .then((newUser2) => {\r\n\t        expect(newUser2).to.eql({\r\n\t          id: 2,\r\n\t          email: 'alice@somebody.com',\r\n\t          name: 'alice bob',\r\n\t          address: 'now living in planet earth',\r\n\t        });\r\n\t      })\r\n\t      .catch((error) => {\r\n\t        expect(error).to.eql({ message: 'user not found' });\r\n\t      });\r\n\t \t});\r\n\r\n\t \tit('should fail if arguments are not objects', () => {\r\n      users.update('wrongdUser2', updateUser2)\r\n        .then((newUser2) => {\r\n          expect(newUser2).to.eql({\r\n            id: 2,\r\n            email: 'alice@somebody.com',\r\n            name: 'alice bob',\r\n            address: 'now living in planet earth',\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          expect(error).to.eql({ message: 'invalid argument passed to update! expects argument1 and argument2 to be objects' });\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('findById', () => {\r\n    it('should return the model with the given id', () => {\r\n      users.findById(1)\r\n        .then((user) => {\r\n          expect(user).to.eql({\r\n            id: 1,\r\n            name: 'jane doe',\r\n            email: 'jane_doe@somebody.com',\r\n            address: 'somewhere in the world',\r\n          });\r\n        });\r\n    });\r\n\r\n    it('should return not found if model with given id is not not found', () => {\r\n      users.findById(3)\r\n        .then((user) => {\r\n          expect(user).to.eql({\r\n            id: 1,\r\n            name: 'jane doe',\r\n            email: 'jane_doe@somebody.com',\r\n            address: 'somewhere in the world',\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          expect(error).to.eql({ error: `${users.singleModel} not found` });\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('find', () => {\r\n    it('should find a model that meet the given conditions', () => {\r\n    \t//  console.log(users)\r\n      users.find({\r\n        where: {\r\n          name: 'alice bob',\r\n        },\r\n      })\r\n      .then((user) => {\r\n        expect(user).to.eql({\r\n          id: 2,\r\n          email: 'alice@somebody.com',\r\n          name: 'alice bob',\r\n          address: 'now living in planet earth',\r\n        });\r\n      });\r\n    });\r\n\r\n    it('should only return a model that meet all conditions', () => {\r\n      users.find({\r\n        where: {\r\n          name: 'alice bob',\r\n          id: 4,\r\n        },\r\n      })\r\n        .then((user) => {\r\n          expect(user).to.eql({\r\n            id: 2,\r\n            email: 'alice@somebody.com',\r\n            name: 'alice bob',\r\n            address: 'now living in planet earth',\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          expect(error).to.eql({ message: 'user not found' });\r\n        });\r\n    });\r\n\r\n    it('should fail if no condition is specified', () => {\r\n      users.find()\r\n        .catch((error) => {\r\n          expect(error).to.eql({ message: 'missing object propertiy \\'where\\' to find model'});\r\n        });\r\n    });\r\n\r\n    it('should fail if condition does not have property \"where\"', () => {\r\n      users.find({})\r\n        .catch((error) => {\r\n          expect(error).to.eql({ message: 'missing object propertiy \\'where\\' to find model'});\r\n        });\r\n    });\r\n  });\r\n\r\n  describe('findAll', () => {\r\n    it('should return all models if no condition is specified', () => {\r\n      users.findAll()\r\n        .then((allUsers) => {\r\n          expect(allUsers).to.be.an('array');\r\n          expect(allUsers.length).to.equal(2);\r\n        });\r\n    });\r\n\r\n    it('should return all models that meets the specified conditions', () => {\r\n      users.findAll({\r\n        where: {\r\n          address: 'somewhere in the world',\r\n        },\r\n      })\r\n        .then((allUsers) => {\r\n          expect(allUsers).to.be.an('array');\r\n          expect(allUsers).to.have.length.of.at.least(1);\r\n        });\r\n    });\r\n\r\n    it('should return an empty array if models does not that meets the specified conditions', () => {\r\n      users.findAll({\r\n        where: {\r\n          address: 'somewhere the world',\r\n        },\r\n      })\r\n        .then((allUsers) => {\r\n          expect(allUsers).to.be.an('array');\r\n          expect(allUsers).to.have.length(0);\r\n        });\r\n    });\r\n  });\r\n  describe('destroy', () => {\r\n    it('should delete a model that meets the specified condition', () => {\r\n      users.destroy({\r\n        where: {\r\n          id: 1,\r\n        },\r\n      })\r\n        .then((message) => {\r\n          expect(message).to.eql({ message: 'user has been deleted' });\r\n        });\r\n    });\r\n  });\r\n});\r\n"]}